<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/typed-errors/either-and-ior" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Either & Ior (& Result) | Arrow</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://arrow-kt.io/img/social-card.jpg /><meta data-rh=true name=twitter:image content=https://arrow-kt.io/img/social-card.jpg /><meta data-rh=true property=og:url content=https://arrow-kt.io/learn/typed-errors/either-and-ior/ /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Either & Ior (& Result) | Arrow"/><meta data-rh=true name=description content="Use cases for Either and Ior."/><meta data-rh=true property=og:description content="Use cases for Either and Ior."/><link data-rh=true rel=icon href=/img/arrow-brand-icon.svg /><link data-rh=true rel=canonical href=https://arrow-kt.io/learn/typed-errors/either-and-ior/ /><link data-rh=true rel=alternate href=https://arrow-kt.io/learn/typed-errors/either-and-ior/ hreflang=en /><link data-rh=true rel=alternate href=https://arrow-kt.io/learn/typed-errors/either-and-ior/ hreflang=x-default /><link rel=alternate type=application/rss+xml href=/community/blog/rss.xml title="Arrow RSS Feed"><link rel=alternate type=application/atom+xml href=/community/blog/atom.xml title="Arrow Atom Feed"><link rel=stylesheet href=/assets/css/styles.2b48d13e.css /><script src=/assets/js/runtime~main.5acff656.js defer></script><script src=/assets/js/main.165a438d.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/arrow-brand.svg alt="Arrow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/arrow-brand-dark.svg alt="Arrow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/>Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/learn/overview/>Learn</a><ul class=dropdown__menu><li><a class=dropdown__link href=/learn/quickstart/>Quickstart</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/learn/typed-errors/>Typed errors</a><li><a class=dropdown__link href=/learn/coroutines/>Concurrency and resources</a><li><a class=dropdown__link href=/learn/resilience/>Resilience</a><li><a class=dropdown__link href=/learn/immutable-data/>Immutable data</a><li><a class=dropdown__link href=/learn/collections-functions/>Collections and functions</a><li><a class=dropdown__link href=/learn/design/>Design recipes</a><li><a class=dropdown__link href=/learn/projects/>Example projects</a><li><a class=dropdown__link href=/learn/integrations/>Integrations</a></ul></div><a href=https://apidocs.arrow-kt.io target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">API Docs<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Community</a><ul class=dropdown__menu><li><a class=dropdown__link href=/community/blog/>Blog</a><li><a class=dropdown__link href=/libraries/>More libraries</a></ul></div><div class=navbar__item><img src="https://img.shields.io/maven-central/v/io.arrow-kt/arrow-core?color=5b88f8&label=latest"></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value="" /><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/learn/quickstart/><span title=Quickstart class=categoryLinkLabel_W154>Quickstart</span></a><button aria-label="Expand sidebar category 'Quickstart'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href=/learn/typed-errors/><span title="Typed errors" class=categoryLinkLabel_W154>Typed errors</span></a><button aria-label="Collapse sidebar category 'Typed errors'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learn/typed-errors/working-with-typed-errors/><span title="Working with typed errors" class=linkLabel_WmDU>Working with typed errors</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learn/typed-errors/validation/><span title=Validation class=linkLabel_WmDU>Validation</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learn/typed-errors/from-either-to-raise/><span title="From Either to Raise" class=linkLabel_WmDU>From Either to Raise</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learn/typed-errors/nullable-and-option/><span title="Why nullable types & Option?" class=linkLabel_WmDU>Why nullable types & Option?</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/learn/typed-errors/either-and-ior/><span title="Either & Ior (& Result)" class=linkLabel_WmDU>Either & Ior (& Result)</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learn/typed-errors/outcome-progress/><span title="Outcomes and in-progress" class=linkLabel_WmDU>Outcomes and in-progress</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/learn/typed-errors/own-error-types/><span title="Your own error wrappers" class=linkLabel_WmDU>Your own error wrappers</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/learn/coroutines/><span title="Concurrency and resources" class=categoryLinkLabel_W154>Concurrency and resources</span></a><button aria-label="Expand sidebar category 'Concurrency and resources'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/learn/resilience/><span title=Resilience class=categoryLinkLabel_W154>Resilience</span></a><button aria-label="Expand sidebar category 'Resilience'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/learn/immutable-data/><span title="Immutable data" class=categoryLinkLabel_W154>Immutable data</span></a><button aria-label="Expand sidebar category 'Immutable data'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/learn/collections-functions/><span title="Collections and functions" class=categoryLinkLabel_W154>Collections and functions</span></a><button aria-label="Expand sidebar category 'Collections and functions'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/learn/design/><span title="Design recipes" class=categoryLinkLabel_W154>Design recipes</span></a><button aria-label="Expand sidebar category 'Design recipes'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/learn/projects/><span title="Example projects" class=linkLabel_WmDU>Example projects</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/learn/integrations/><span title=Integrations class=linkLabel_WmDU>Integrations</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/learn/summary/><span title=Summary class=linkLabel_WmDU>Summary</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-hidden"><a class=menu__link href=/learn/overview/><span title=overview class=linkLabel_WmDU>overview</span></a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Either & Ior (& Result)</h1></header>
<p>Both <a href=https://apidocs.arrow-kt.io/arrow-core/arrow.core/-either/index.html target=_blank rel="noopener noreferrer" class=""><code>Either&lt;E, A></code></a>
and <a href=https://apidocs.arrow-kt.io/arrow-core/arrow.core/-ior/index.html target=_blank rel="noopener noreferrer" class=""><code>Ior&lt;E, A></code></a> (<em>I</em>nclusive <em>Or</em>)
hold values that may be of type <code>E</code> or <code>A</code>.
By convention, the type <code>E</code> represents <em>errors</em> and the type <code>A</code> represents
<em>success</em>. For example, <code>Either&lt;DbError, User></code> could be a good result type for
a function that accesses a database and returns a <code>User</code> but may also fail
with a <code>DbError</code>.</p>
<p><code>Either&lt;E, A></code> only admits these two possibilities: a <code>Left</code> holding a value of
type <code>E</code> or a <code>Right</code> holding a value of type <code>A</code>. On the other hand, <code>Ior&lt;E, A></code>
provides a third option, namely <code>Both</code>. Using <code>Both</code>, you can represent states
that are considered successful but with some potential errors during execution;
like a compiler that finishes successfully but has some warnings. Nevertheless,
<code>Ior</code> is not used very often.</p>
<p>These two types look very similar to the
<a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-result/ target=_blank rel="noopener noreferrer" class=""><code>Result</code></a>
that comes with the standard library. However, <code>Result</code> is tighly coupled to the
coroutine and exception machinery in the language. In fact, the "failure" case
only admits <code>Throwable</code> errors. Even though the use case is more niche, the same
API is also available for <code>Result</code> values.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=using-builders>Using builders<a href=#using-builders class=hash-link aria-label="Direct link to Using builders" title="Direct link to Using builders" translate=no>​</a></h2>
<p>The preferred way to work with <code>Either</code> and <code>Ior</code> is to use <a class="" href=/learn/typed-errors/working-with-typed-errors/#running-and-inspecting-results>builders</a>.
Those start with a call to <code>either</code> or <code>ior</code> followed by a lambda; inside that
block, we can access the uniform typed errors API with functions like <code>raise</code>,
<code>ensure</code>, and <code>recover</code>. For the <code>Result</code> type the builder is called <code>result</code>,
although in that case most errors come from
<a href=https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/run-catching.html target=_blank rel="noopener noreferrer" class=""><code>runCatching</code></a>.</p>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#D4D4D4;--prism-background-color:#222E51><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style=color:#D4D4D4;background-color:#222E51><code class=codeBlockLines_e6Vv><span class=token-line style=color:#D4D4D4><span class="token keyword" style=color:#82a2f3>import</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">core</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">raise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">either</span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token keyword" style=color:#82a2f3>import</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">core</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">raise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ensure</span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token keyword" style=color:#82a2f3>data</span><span class="token plain"> </span><span class="token keyword" style=color:#82a2f3>class</span><span class="token plain"> </span><span class="token function" style=color:#EDB368>MyError</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style=color:#82a2f3>val</span><span class="token plain"> message</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token keyword" style=color:#82a2f3>fun</span><span class="token plain"> </span><span class="token function" style=color:#EDB368>isPositive</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Int</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Either</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">MyError</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> Int</span><span class="token operator" style="color:rgb(212, 212, 212)">></span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> either </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  </span><span class="token function" style=color:#EDB368>ensure</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i </span><span class="token operator" style="color:rgb(212, 212, 212)">></span><span class="token plain"> </span><span class="token number" style=color:#cfcd9a>0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token function" style=color:#EDB368>MyError</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal singleline string" style=color:#5B88F8>"</span><span class="token string-literal singleline interpolation interpolation-punctuation punctuation" style="color:rgb(212, 212, 212)">$</span><span class="token string-literal singleline interpolation expression" style=color:#b0bee3>i</span><span class="token string-literal singleline string" style=color:#5B88F8> is not positive"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  i</span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token keyword" style=color:#82a2f3>suspend</span><span class="token plain"> </span><span class="token keyword" style=color:#82a2f3>fun</span><span class="token plain"> </span><span class="token function" style=color:#EDB368>example</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  </span><span class="token function" style=color:#EDB368>isPositive</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style=color:#cfcd9a>1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> shouldBe </span><span class="token function" style=color:#EDB368>MyError</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal singleline string" style=color:#5B88F8>"-1 is not positive"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style=color:#EDB368>left</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  </span><span class="token function" style=color:#EDB368>isPositive</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style=color:#cfcd9a>1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  shouldBe </span><span class="token number" style=color:#cfcd9a>1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style=color:#EDB368>right</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br/></span></code></pre></div></div>
<p>To give you the complete picture, inside those blocks, the potential errors are
represented by a receiver of type <code>Raise&lt;E></code>. Functions with that receiver can
be transformed into a variety of types; not only <code>Either</code> and <code>Ior</code>, but also
<code>Result</code>, <code>Option</code>, or a nullable type.</p>
<p>A common scenario is to have a potentially erroneous value (not only limited
to that of the block) that we want to <em>unwrap</em>.
That is, we want potential errors in those values to bubble up
as errors of the entire block or continue the execution if the value represents
success. In those cases, we need to call <code>.bind()</code> over that value.</p>
<!-- -->
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 fill=none viewBox="0 0 24 24"><path fill=currentColor fill-rule=evenodd d="M4.25 9a7.75 7.75 0 1 1 15.5 0v4.823l2.464 4.927H1.787l2.463-4.927zM10 23h4v-2h-4z" clip-rule=evenodd /></svg></span>tip</div><div class=admonitionContent_BuS1><p>We recommend using the <a href=https://github.com/woltapp/arrow-detekt-rules#noeffectscopebindablevalueasstatement target=_blank rel="noopener noreferrer" class="">custom <code>NoEffectScopeBindableValueAsStatement</code> rule</a>
for <a href=https://detekt.dev/ target=_blank rel="noopener noreferrer" class="">Detekt</a> to prevent forgetting <code>.bind()</code> inside
an <code>either</code> or <code>ior</code> block.</div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=combining-ior-errors>Combining Ior errors<a href=#combining-ior-errors class=hash-link aria-label="Direct link to Combining Ior errors" title="Direct link to Combining Ior errors" translate=no>​</a></h3>
<p>The flow in an <code>Either</code> block is simple: we execute each line of code; if at some point
we <code>bind()</code> a <code>Left</code> or find a <code>raise</code>, we stop and return that value; if we get
to the end, we wrap the result in <code>Right</code>. <code>ior</code> blocks are a bit more complicated,
since we may end up in a situation in which we have errors to be reported, yet
we also have a value to continue the execution. This brings up a question: what
should we do if <em>several</em> steps in the block are <code>Both</code>? The current API leaves
the answer open to the developer. The <code>ior</code> builder has
an additional parameter that specifies how to combine several errors.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=without-builders>Without builders<a href=#without-builders class=hash-link aria-label="Direct link to Without builders" title="Direct link to Without builders" translate=no>​</a></h2>
<p>In some scenarios, builders may be an overkill for the task at hand. For those cases,
we provide functions that create or operate directly on <code>Either</code> and <code>Ior</code>.</p>
<p>On the generation front, extension functions like <code>.left()</code> and <code>.right()</code>
provide another way to write expressions that won't obscure the inner contents
as much as a constructor. Validations are often written in that style.</p>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#D4D4D4;--prism-background-color:#222E51><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style=color:#D4D4D4;background-color:#222E51><code class=codeBlockLines_e6Vv><span class=token-line style=color:#D4D4D4><span class="token comment" style=color:#6b738a>// this is the type we want to construct</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token annotation builtin" style="color:rgb(86, 156, 214)">@JvmInline</span><span class="token plain"> value </span><span class="token keyword" style=color:#82a2f3>class</span><span class="token plain"> </span><span class="token function" style=color:#EDB368>Age</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style=color:#82a2f3>val</span><span class="token plain"> age</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Int</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token comment" style=color:#6b738a>// these are the potential problems</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token keyword" style=color:#82a2f3>sealed</span><span class="token plain"> </span><span class="token keyword" style=color:#82a2f3>interface</span><span class="token plain"> AgeProblem </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  </span><span class="token keyword" style=color:#82a2f3>object</span><span class="token plain"> InvalidAge</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> AgeProblem</span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  </span><span class="token keyword" style=color:#82a2f3>object</span><span class="token plain"> NotLegalAdult</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> AgeProblem</span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token comment" style=color:#6b738a>// validation returns either problems or the constructed value</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token keyword" style=color:#82a2f3>fun</span><span class="token plain"> </span><span class="token function" style=color:#EDB368>validAdult</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">age</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Int</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Either</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">AgeProblem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> Age</span><span class="token operator" style="color:rgb(212, 212, 212)">></span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style=color:#82a2f3>when</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  age </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> </span><span class="token number" style=color:#cfcd9a>0</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">-></span><span class="token plain"> AgeProblem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">InvalidAge</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style=color:#EDB368>left</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  age </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> </span><span class="token number" style=color:#cfcd9a>18</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-></span><span class="token plain"> AgeProblem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">NotLegalAdult</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style=color:#EDB368>left</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain">  </span><span class="token keyword" style=color:#82a2f3>else</span><span class="token plain">     </span><span class="token operator" style="color:rgb(212, 212, 212)">-></span><span class="token plain"> </span><span class="token function" style=color:#EDB368>Age</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style=color:#EDB368>right</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#D4D4D4><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br/></span></code></pre></div></div>
<p>Another way to obtain an <code>Either</code> is by using <code>Either.catch</code>, which wraps a
computation that may throw exceptions and returns a <code>Left</code> if that's the case.
Essentially, it's <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run-catching.html target=_blank rel="noopener noreferrer" class=""><code>runCatching</code> from the standard library</a>,
but replacing <code>Result</code> with <code>Either</code>.</p>
<p>The rest of the API closely follows the one from <a class="" href=/learn/typed-errors/>typed errors</a>.
For example, you can call <code>recover</code> or <code>zipOrAccumulate</code> directly on <code>Either</code>
without the need for an additional <code>either { }</code> block. One potentially useful
function not part of builders is <a href=https://apidocs.arrow-kt.io/arrow-core/arrow.core/-either/map-left.html target=_blank rel="noopener noreferrer" class=""><code>mapLeft</code></a>,
which applies a function when the value represents an error. This scenario often
arises when your code has a hierarchy of different error types.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=either-for-validation>Either for validation<a href=#either-for-validation class=hash-link aria-label="Direct link to Either for validation" title="Direct link to Either for validation" translate=no>​</a></h2>
<p><code>Either</code> has a double face: it can be used to model problems in a piece of code,
pretty much like exceptions, but also to define validations over some input data.
The difference between these two scenarios is how we react to <em>several</em> problems
arising in a piece of code.</p>
<ul>
<li class="">When we think of exceptions, we have a <em>fail-fast</em> or <em>fail-first</em> approach:
Once we discover a problem, we want to stop execution and immediately report
to the caller. In those scenarios, steps <em>depend</em> on one another, so it makes
no sense to keep trying.</li>
<li class="">When we think of validation, we want to be as comprehensive as possible with
potential problems with the input data. In other words, if the given name
and age are wrong, we want to report both, not just the first one.
This approach is called <em>accumulation</em> and arises when the code is computations
whose failure is <em>independent</em> of each other.</li>
</ul>
<p>By default, an <code>either</code> block follows the first approach. If you want to accumulate
errors instead, you should use <a href=https://apidocs.arrow-kt.io/arrow-core/arrow.core/-either/-companion/zip-or-accumulate.html target=_blank rel="noopener noreferrer" class=""><code>zipOrAccumulate</code></a>,
or <a href=https://apidocs.arrow-kt.io/arrow-core/arrow.core/map-or-accumulate.html target=_blank rel="noopener noreferrer" class=""><code>mapOrAccumulate</code></a>.
The difference is that the former takes the different computations as arguments,
and they can return different types, whereas the latter applies the same computation
uniformly to elements of an <code>Iterable</code>.</p>
<p>One common pattern when describing validations is to have an <code>Either</code> with
<code>List&lt;Problem></code> as the error type. Arrow provides a more refined version
where we ensure that we never end up in an awkward situation in which we have
a <code>Left</code> value, but the list of problems is empty.</p>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#D4D4D4;--prism-background-color:#222E51><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style=color:#D4D4D4;background-color:#222E51><code class=codeBlockLines_e6Vv><span class=token-line style=color:#D4D4D4><span class="token keyword" style=color:#82a2f3>public</span><span class="token plain"> </span><span class="token keyword" style=color:#82a2f3>typealias</span><span class="token plain"> EitherNel</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">E</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> A</span><span class="token operator" style="color:rgb(212, 212, 212)">></span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Either</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">NonEmptyList</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">E</span><span class="token operator" style="color:rgb(212, 212, 212)">></span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> A</span><span class="token operator" style="color:rgb(212, 212, 212)">></span><br/></span></code></pre></div></div>
<p>In Arrow 1.x series, a different type called <code>Validation</code> embodied
the accumulation strategy for errors. However, the API was almost identical, and
sometimes code ended up flooded with conversion back and forth between <code>Either</code> and <code>Validation</code>.
Arrow 2.x provides a single <code>Either</code> type instead, but we encourage you to use
the <code>EitherNel</code> type alias if you are describing a validation.</div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/learn/typed-errors/nullable-and-option/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Why nullable types & Option?</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/learn/typed-errors/outcome-progress/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Outcomes and in-progress</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#using-builders class="table-of-contents__link toc-highlight">Using builders</a><ul><li><a href=#combining-ior-errors class="table-of-contents__link toc-highlight">Combining Ior errors</a></ul><li><a href=#without-builders class="table-of-contents__link toc-highlight">Without builders</a><li><a href=#either-for-validation class="table-of-contents__link toc-highlight">Either for validation</a></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid container_y1z5"><div><div class="margin-bottom--sm logo_cbK_"><a href=https://arrow-kt.io rel="noopener noreferrer" class=footerLogoLink_BH7S><img src=/img/arrow-brand.svg alt="Arrow Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width=128 height=42 /><img src=/img/arrow-brand-dark.svg alt="Arrow Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width=128 height=42 /></a></div><small><div class=footer__copyright>Arrow is developed and maintained by the community</div></small></div><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title></div><ul class="footer__items clean-list"><li class=footer__item><a href=https://apidocs.arrow-kt.io target=_blank rel="noopener noreferrer" class=footer__link-item>API Docs<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a class=footer__link-item href=/community/blog/>Blog</a><li class=footer__item><a class=footer__link-item href=/learn/projects/>Example projects</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Learn</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/learn/quickstart/>Quickstart</a><li class=footer__item><a class=footer__link-item href=/learn/typed-errors/>Typed errors</a><li class=footer__item><a class=footer__link-item href=/learn/coroutines/>Coroutines</a><li class=footer__item><a class=footer__link-item href=/learn/resilience/>Resilience</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>...</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/learn/immutable-data/>Immutable data</a><li class=footer__item><a class=footer__link-item href=/learn/collections-functions/>Collections and functions</a><li class=footer__item><a class=footer__link-item href=/learn/design/>Design</a><li class=footer__item><a class=footer__link-item href=/learn/integrations/>Integrations</a></ul></div></div><ul class="clean-list container_dM9r"><li><a href=https://twitter.com/arrow_kt target=_blank rel="noopener noreferrer"><img src=/img/icon-social-twitter.svg alt=Twitter title=Twitter height=24px width=24px /></a><li><a href=https://slack-chats.kotlinlang.org/c/arrow target=_blank rel="noopener noreferrer"><img src=/img/icon-social-slack.svg alt=Slack title=Slack height=24px width=24px /></a><li><a href=https://github.com/arrow-kt target=_blank rel="noopener noreferrer"><img src=/img/icon-social-github.svg alt=GitHub title=GitHub height=24px width=24px /></a><li><a href=https://stackoverflow.com/questions/tagged/arrow-kt target=_blank rel="noopener noreferrer"><img src=/img/icon-social-stackoverflow.svg alt="Stack Overflow" title="Stack Overflow" height=24px width=24px /></a></li><div class=starsContainer_WEfU><div>Loading...</div></div></ul></div></footer></div></body>