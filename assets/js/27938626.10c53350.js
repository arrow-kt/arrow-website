"use strict";(self.webpackChunkarrow_website=self.webpackChunkarrow_website||[]).push([["5737"],{32024:function(e,n,r){r.r(n),r.d(n,{metadata:()=>t,default:()=>p,frontMatter:()=>l,contentTitle:()=>c,toc:()=>d,assets:()=>u});var t=JSON.parse('{"id":"learn/quickstart/index","title":"Quickstart","description":"Arrow aims to be the perfect companion to your Kotlin journey. That means it focuses on tasks most developers deal with, like modifying data or managing resources. Given these aims, Arrow strives to provide idiomatic solutions and integrate with core Kotlin concepts such as coroutines.","source":"@site/content/docs/learn/quickstart/index.md","sourceDirName":"learn/quickstart","slug":"/learn/quickstart/","permalink":"/learn/quickstart/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Quickstart","sidebar_custom_props":{"icon":"icon-quickstart.svg","overview":true},"position":1},"sidebar":"learnSidebar","next":{"title":"Setup","permalink":"/learn/quickstart/setup/"}}'),a=r(74848),s=r(28453),i=r(78010),o=r(57250);let l={title:"Quickstart",sidebar_custom_props:{icon:"icon-quickstart.svg",overview:!0},position:1},c="Quickstart",u={},d=[{value:"Typed errors",id:"typed-errors",level:3},{value:"Concurrency and resources",id:"concurrency-and-resources",level:3},{value:"Resilience",id:"resilience",level:3},{value:"Immutable data",id:"immutable-data",level:3},{value:"And more!",id:"and-more",level:3}];function h(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"quickstart",children:(0,a.jsx)("decorated-text",{icon:l.sidebar_custom_props.icon,children:"Quickstart"})})}),"\n",(0,a.jsxs)(n.p,{children:["Arrow aims to be the ",(0,a.jsx)(n.em,{children:"perfect companion"})," to your Kotlin journey. That means it focuses on tasks most developers deal with, like modifying data or managing resources. Given these aims, Arrow strives to provide ",(0,a.jsx)(n.em,{children:"idiomatic"})," solutions and integrate with core Kotlin concepts such as coroutines."]}),"\n",(0,a.jsxs)(n.p,{children:["Arrow is inspired by the great work made in other programming language communities, especially from ",(0,a.jsx)(n.em,{children:"functional"}),", ",(0,a.jsx)(n.em,{children:"data-oriented"})," and ",(0,a.jsx)(n.em,{children:"concurrent"})," programming. This doesn't mean you need to know any of those ideas to use the libraries; Arrow exposes these concepts in ways that do not feel alien to Kotlin programmers."]}),"\n",(0,a.jsx)(n.admonition,{title:"DSLs",type:"info",children:(0,a.jsx)(n.p,{children:"Arrow uses Domain Specific Languages (DSLs) to provide a more concise syntax for many tasks.\nThis is just a fancy way of saying that Arrow libraries often have a core function that ought to be called with a lambda,\nand inside that new scope you get access to additional behaviors."})}),"\n",(0,a.jsx)(n.h3,{id:"typed-errors",children:"Typed errors"}),"\n",(0,a.jsxs)(i.A,{groupId:"typedErrors1",children:[(0,a.jsx)(o.A,{value:"typedErrors1Explanation",label:"Domain errors",children:(0,a.jsxs)(n.p,{children:["With Arrow you can succinctly describe what kind of ",(0,a.jsx)(n.strong,{children:"domain errors"})," may arise in your functions.\nThis brings extra clarity to your code, as you can more easily track what failure may happen,\nand also extra safety, as the compiler will ensure that you don't forget to handle a possible error."]})}),(0,a.jsx)(o.A,{value:"typedErrors1Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"// these signatures mark the possible errors\nsuspend fun findUser(id: UserId): Either<UserNotFound, User> { TODO() }\n\n// you build larger computations using the 'Raise' DSL\nsuspend fun fromTheSameCity(id1: UserId, id2: UserId): Either<UserNotFound, Boolean> =\n  either {  // this begins a 'Raise' block\n    val user1 = findUser(id1).bind()  // 'bind' aborts computation on failure\n    val user2 = findUser(id2).bind()\n    return user1.city == user2.city\n  }\n"})})})]}),"\n",(0,a.jsxs)(i.A,{groupId:"typedErrors2",children:[(0,a.jsx)(o.A,{value:"typedErrors2Explanation",label:"Validation and accumulation",children:(0,a.jsxs)(n.p,{children:["Arrow does not only provide fail-first behavior for errors, but also error ",(0,a.jsx)(n.strong,{children:"accumulation"}),".\nThis is especially useful when validating user input, as you often want to report as many problems at once."]})}),(0,a.jsx)(o.A,{value:"typedErrors2Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"fun buildUser(name: String, age: Int): Either<NonEmptyList<UserProblem>, User> = \n  either {\n    accumulate {\n      ensureOrAccumulate(name.isNotEmpty()) { UserProblem.EmptyName }\n      ensureOrAccumulate(age >= 0) { UserProblem.NegativeAge(age) }\n      User(name, age)\n    }\n  }\n"})})})]}),"\n",(0,a.jsx)(n.h3,{id:"concurrency-and-resources",children:"Concurrency and resources"}),"\n",(0,a.jsxs)(i.A,{groupId:"concurrency1",children:[(0,a.jsx)(o.A,{value:"concurrency1Text",label:"Simpler parallelism and racing",children:(0,a.jsxs)(n.p,{children:["Kotlin coroutines are a powerful mechanism for concurrency. However, sometimes you need to describe what you want\nto happen in more detail than you may want. Arrow provides higher-level constructs that focus on the intent:\n",(0,a.jsx)(n.strong,{children:"parallelism and racing"})," (executing several computations concurrently but waiting only for the first one).\nCancellations and exceptions are handled following the Structured Concurrency principles."]})}),(0,a.jsx)(o.A,{value:"concurrency1Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"// obtain information in parallel, taking a maximum of 5 tasks concurrently\nsuspend fun getFriendNames(id: UserId): List<User> =\n  getFriendIds(id).parMap(concurrency = 5) { findUser(it) }\n\n// implement a caching strategy for users,\n// get the first result that succeeds\nsuspend fun findUserRacing(id: UserId): User = racing {\n  race { UserRepository.findUser(id) }\n  race { LocalCache.getUser(id) }\n}\n"})})})]}),"\n",(0,a.jsxs)(i.A,{groupId:"concurrency2",children:[(0,a.jsx)(o.A,{value:"concurrency2Explanation",label:"Resource management",children:(0,a.jsxs)(n.p,{children:["Allocation and release of resources is not easy, especially when we have multiple resources that depend on each other.\nThe Resource DSL adds the ability to install ",(0,a.jsx)(n.strong,{children:"resources"})," and ensure proper finalization even in the face of exceptions and cancellations.\nFurthermore, your code moves from a mess of nested ",(0,a.jsx)(n.code,{children:"try"}),"s or ",(0,a.jsx)(n.code,{children:"use"}),"s to a ",(0,a.jsx)(n.strong,{children:"linear"})," sequence of operations."]})}),(0,a.jsx)(o.A,{value:"concurrency2Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"suspend fun main(): Unit = resourceScope {\n  // register several resources\n  val client = autoCloseable { HttpClient() }  // compatible with 'AutoCloseable'\n  val dataSource = install({ DataSource(client) }) { s, _ -> s.disconnect() }\n  // use dataSource here\n}\n"})})})]}),"\n",(0,a.jsxs)(i.A,{groupId:"concurrency3",children:[(0,a.jsx)(o.A,{value:"concurrency3Explanation",label:"Transactions",children:(0,a.jsxs)(n.p,{children:["Sharing data across multiple concurrent computations is always tricky,\nespecially when this data is not just a single atomic value.\nArrow provides a higher level notion of ",(0,a.jsx)(n.strong,{children:"transactions"})," for your state,\nproviding protection for whole execution blocks, and introducing the notion\nof rollback for failed computations."]})}),(0,a.jsx)(o.A,{value:"concurrency3Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"// STM is 'Software Transactional Memory'\n// TVar is an atomic transactional variable\nfun STM.withdraw(acc: TVar<Int>, amount: Int) {\n  val current = acc.read()\n  // failing this check will rollback the transaction\n  require(current - amount >= 0) { \"Not enough money in the account!\" }\n  acc.write(current - amount)\n}\n"})})})]}),"\n",(0,a.jsx)(n.h3,{id:"resilience",children:"Resilience"}),"\n",(0,a.jsxs)(i.A,{groupId:"resilience1",children:[(0,a.jsx)(o.A,{value:"resilience1Explanation",label:"Retries",children:(0,a.jsxs)(n.p,{children:["Most, if not all, of the systems we develop nowadays require the cooperation of other services,\nwhich may live in the same process, on the same machine, or may require some network communication.\nThis creates a lot of different potential scenarios where things may fail.\nArrow provides a simple yet powerful way to define ",(0,a.jsx)(n.strong,{children:"policies"})," for ",(0,a.jsx)(n.strong,{children:"retrying"})," failed computations."]})}),(0,a.jsx)(o.A,{value:"resilience1Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"// - exponential backoff of 10ms for the first minute,\n// - then try 10s for 50 times,\n// - add some jitter to the entire process\nfun <A> complexPolicy(): Schedule<A, List<A>> = Schedule\n    .exponential<A>(10.milliseconds).doWhile { _, duration -> duration < 60.seconds }\n    .andThen(Schedule.spaced<A>(10.seconds) and Schedule.recurs(50))\n    .jittered()\n\n// use this policy to download the avatar\nsuspend fun downloadAvatar(user: User) =\n  complexPolicy().retry { HttpClient().get(user.avatarUrl) }\n"})})})]}),"\n",(0,a.jsxs)(i.A,{groupId:"resilience2",children:[(0,a.jsx)(o.A,{value:"resilience2Explanation",label:"Circuit breaker",children:(0,a.jsxs)(n.p,{children:["In even more complex scenarios simple retry may not be the solution.\nThis is especially true when a service is overloaded, since additional interaction may only worsen its overloaded state.\nArrow provides a ",(0,a.jsx)(n.strong,{children:"circuit breaker"})," mechanism that can be shared between concurrent computations,\nwith a much better protocol to resume execution until several failed attempts."]})}),(0,a.jsx)(o.A,{value:"resilience2Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"val circuitBreaker = CircuitBreaker(\n  openingStrategy = OpeningStrategy.Count(10),\n  resetTimeout = 2.seconds,\n  exponentialBackoffFactor = 1.2,\n  maxResetTimeout = 60.seconds,\n)\n\n// use this policy to download the avatar\nsuspend fun downloadAvatar(user: User) =\n  circuitBreaker.protectOrThrow { HttpClient().get(user.avatarUrl) }\n"})})})]}),"\n",(0,a.jsx)(n.h3,{id:"immutable-data",children:"Immutable data"}),"\n",(0,a.jsxs)(i.A,{groupId:"optics1",children:[(0,a.jsx)(o.A,{value:"optics1Explanation",label:"Update nested data",children:(0,a.jsxs)(n.p,{children:["Immutable data has many advantages in terms of safety \u2014 and Kotlin makes it easy\nto use them with data classes and sealed hierarchies. However, updating those structures\nusing only the provided ",(0,a.jsx)(n.code,{children:"copy"})," may become quite tedious if the data is nested.\nArrow ",(0,a.jsx)(n.strong,{children:"optics"})," give you the tools to write the concise code you always wanted."]})}),(0,a.jsx)(o.A,{value:"options1Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"// instead of this\nfun Person.capitalizeCountry(): Person = this.copy(\n  address = address.copy(\n    city = address.city.copy(\n      country = address.city.country.capitalize()\n    )\n  )\n)\n\n// you can write any of the following two\nfun Person.capitalizeCountryCopy(): Person = this.copy {\n  Person.address.city.country transform { it.capitalize() }\n}\nfun Person.capitalizeCountryModify(): Person =\n  Person.address.city.country.modify(this) { it.capitalize() }\n"})})})]}),"\n",(0,a.jsxs)(i.A,{groupId:"optics2",children:[(0,a.jsx)(o.A,{value:"optics2Explanation",label:"Traverse collections",children:(0,a.jsx)(n.p,{children:"The other difficult part of immutable data is traversing collections,\neither to aggregate data or to modify some part of them.\nFortunately, the optics mechanism also applies to collections,\nso all of your immutable data manipulation can use the same vocabulary."})}),(0,a.jsx)(o.A,{value:"options2Example",label:"Show me the code",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"// traverse every Person in the list and update its age\n// the result is a new list with the modified elements\nfun List<Person>.happyBirthdayOptics(): List<Person> =\n  Every.list<Person>().age.modify(this) { age -> age + 1 }\n"})})})]}),"\n",(0,a.jsx)(n.h3,{id:"and-more",children:"And more!"}),"\n",(0,a.jsx)(n.p,{children:"This was just a quick overview of the main features provided by Arrow.\nSmaller utilities for collections, functions, coroutines, and errors,\nare also part of the ecosystem. The docs describe (almost) all of them,\nso just take a look around and find what you may need."}),"\n",(0,a.jsx)(n.admonition,{title:"Give it a try?",type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/learn/quickstart/setup",children:"Set up"})," Arrow in your project and start exploring!"]}),"\n",(0,a.jsxs)(n.li,{children:["Look at some ",(0,a.jsx)(n.a,{href:"/learn/projects",children:"example projects"})," using Arrow in both frontend and backend"]}),"\n",(0,a.jsxs)(n.li,{children:["Explore the main topics in more depth: ",(0,a.jsx)(n.a,{href:"/learn/typed-errors/",children:"typed errors"}),", ",(0,a.jsx)(n.a,{href:"/learn/coroutines/",children:"concurrency and resources"}),", ",(0,a.jsx)(n.a,{href:"/learn/resilience/",children:"resilience"}),", and ",(0,a.jsx)(n.a,{href:"/learn/immutable-data/",children:"immutable data"})]}),"\n",(0,a.jsxs)(n.li,{children:["Learn about ",(0,a.jsx)(n.a,{href:"/learn/design",children:"design and architecture"})," using functional and data-oriented programming concepts"]}),"\n",(0,a.jsxs)(n.li,{children:["Look at the ",(0,a.jsx)(n.a,{href:"/learn/quickstart/libs/",children:"list of libraries"})," and ",(0,a.jsx)(n.a,{href:"/learn/integrations/",children:"integrations"})," to see how Arrow fits in your existing project"]}),"\n"]})})]})}function p(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},57250:function(e,n,r){r.d(n,{A:()=>s});var t=r(74848);r(96540);var a=r(34164);function s({children:e,hidden:n,className:r}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,a.A)("tabItem_Ymn6",r),hidden:n,children:e})}},78010:function(e,n,r){r.d(n,{A:()=>v});var t=r(74848),a=r(96540),s=r(34164),i=r(88287),o=r(28584),l=r(56347),c=r(99989),u=r(96629),d=r(80618),h=r(41367);function p(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}var f=r(19863);function y({className:e,block:n,selectedValue:r,selectValue:a,tabValues:i}){let l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),u=e=>{let n=e.currentTarget,t=i[l.indexOf(n)].value;t!==r&&(c(n),a(t))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{let r=l.indexOf(e.currentTarget)+1;n=l[r]??l[0];break}case"ArrowLeft":{let r=l.indexOf(e.currentTarget)-1;n=l[r]??l[l.length-1]}}n?.focus()};return(0,t.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:a})=>(0,t.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:u,...a,className:(0,s.A)("tabs__item","tabItem_LNqP",a?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function x({lazy:e,children:n,selectedValue:r}){let i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=i.find(e=>e.props.value===r);return e?(0,a.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,t.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function g(e){let n=function(e){let n,{defaultValue:r,queryString:t=!1,groupId:s}=e,i=function(e){let{values:n,children:r}=e;return(0,a.useMemo)(()=>{let e=n??p(r).map(({props:{value:e,label:n,attributes:r,default:t}})=>({value:e,label:n,attributes:r,default:t})),t=(0,d.XI)(e,(e,n)=>e.value===n.value);if(t.length>0)throw Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,r])}(e),[o,f]=(0,a.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let r=n.find(e=>e.default)??n[0];if(!r)throw Error("Unexpected error: 0 tabValues");return r.value})({defaultValue:r,tabValues:i})),[y,x]=function({queryString:e=!1,groupId:n}){let r=(0,l.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,u.aZ)(t),(0,a.useCallback)(e=>{if(!t)return;let n=new URLSearchParams(r.location.search);n.set(t,e),r.replace({...r.location,search:n.toString()})},[t,r])]}({queryString:t,groupId:s}),[g,v]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[r,t]=(0,h.Dv)(n);return[r,(0,a.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:s}),b=m({value:n=y??g,tabValues:i})?n:null;return(0,c.A)(()=>{b&&f(b)},[b]),{selectedValue:o,selectValue:(0,a.useCallback)(e=>{if(!m({value:e,tabValues:i}))throw Error(`Can't select invalid tab value=${e}`);f(e),x(e),v(e)},[x,v,i]),tabValues:i}}(e);return(0,t.jsxs)("div",{className:(0,s.A)(i.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,t.jsx)(y,{...n,...e}),(0,t.jsx)(x,{...n,...e})]})}function v(e){let n=(0,f.A)();return(0,t.jsx)(g,{...e,children:p(e.children)},String(n))}},28453:function(e,n,r){r.d(n,{R:()=>i,x:()=>o});var t=r(96540);let a={},s=t.createContext(a);function i(e){let n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);